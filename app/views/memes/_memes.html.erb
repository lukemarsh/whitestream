<% memes.each do |meme| %>
  <div class="meme clearfix">
    <div class="col-sm-4">
      <%= link_to meme do %>
        <%= image_tag meme.image, :alt => meme.alt_tag %>
      <% end %>
    </div>
    <div class="col-sm-8">
      <%= raw meme.article.truncate(500) %>
      <div class="pull-left">
        <% if meme.user %>
          <%= link_to username_path(meme.user.username) do %>
            <%= meme.user.username %>
          <% end %>
        <% end %>
      </div>
      <div class="pull-right">
        <% if meme.user && meme.user == current_user || current_admin  %>
          <%= link_to '', meme, :method => :delete, :class => "glyphicon glyphicon-trash",  data: {confirm: "Are you sure you want to delete this article?"} %>
          <%= link_to '', edit_meme_path(meme), :class => "glyphicon glyphicon-pencil" %>
        <% end %>
        <% if current_admin %>
          <% if meme.featured %>
            <%= link_to meme_unfeature_path(meme), :method => :delete, :class => "feature" do %>
              <span class="glyphicon glyphicon-star"></span>
            <% end %>
          <% else %>
            <%= link_to meme_feature_path(meme), :method => :post, :class => "feature" do %>
              <span class="glyphicon glyphicon-star"></span>
            <% end %>
          <% end %>
        <% end %>
        <span class="views">
          <span class="glyphicon glyphicon-eye-open"></span> <%= meme.impressionist_count(:filter=>:ip_address) %>
        </span>
        <span class="comments">
          <span class="glyphicon glyphicon-comment"></span> <%= meme.comments.count %>
        </span>
        <span class="like" id="meme_<%= meme.id %>">
          <%= render partial: 'memes/like', locals: {meme: meme} %>
        </span>
      </div>
    </div>
  </div>
<% end %>